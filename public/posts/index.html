<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | Daniel Schaaff</title>
<meta name="keywords" content="">
<meta name="description" content="Posts - Daniel Schaaff">
<meta name="author" content="Daniel Schaaff">
<link rel="canonical" href="http://localhost:1313/posts/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/posts/index.xml">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="http://localhost:1313/posts/">
  <meta property="og:site_name" content="Daniel Schaaff">
  <meta property="og:title" content="Posts">
  <meta property="og:description" content="My humble home on the internet.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Posts">
<meta name="twitter:description" content="My humble home on the internet.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Daniel Schaaff (Alt + H)">Daniel Schaaff</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/cv/" title="CV">
                    <span>CV</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="Blog">
                    <span class="active">Blog</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="http://localhost:1313/">Home</a></div>
  <h1>
    Posts
    <a href="/posts/index.xml" title="RSS" aria-label="RSS">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round" height="23">
        <path d="M4 11a9 9 0 0 1 9 9" />
        <path d="M4 4a16 16 0 0 1 16 16" />
        <circle cx="5" cy="19" r="1" />
      </svg>
    </a>
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Think Twice Before Adopting EKS Auto Mode
    </h2>
  </header>
  <div class="entry-content">
    <p>I’ve been using AWS’ EKS service for many years. What began as a bare bones offering has slowly and steadily added more features over the years. Amazon recently announced “auto” mode for EKS clusters. In this new mode AWS manages a Karpenter installation, core addons such as coredns and vpc-cni, as well as the underlying ec2 nodes. On paper this sounds great, but as always the devil is in the details. In this instance, it is important to be aware of the ~ 10% price premium for this mode. In auto mode AWS will charge an hourly rate for the ec2 instances in addition to the standard instance charge. While some folks may find this a fair trade off, I would not choose this mode myself. I run clusters using Karpenter as the autoscaler and use bottlerocket-os for the underlying nodes. In this configuration the management overhead is extremely low. I even gave a short talk on this setup for AWS a while back. IMO, if you are already running an EKS cluster using Karpenter and Bottlerocket you have little to gain from auto mode relative to the price premium.
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-12-09 00:00:00 +0000 UTC'>December 9, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;dschaaff</footer>
  <a class="entry-link" aria-label="post link to Think Twice Before Adopting EKS Auto Mode" href="http://localhost:1313/posts/2024/eks-auto-mode/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Update on iCloud&#43; Custom Email Domain
    </h2>
  </header>
  <div class="entry-content">
    <p>I’ve been using my custom domain with iCloud email for a couple weeks. Truth be told I hardly notice any difference from when I used Gmail. That’s largely due to using Apple Mail app as my primary interface. I haven’t had any reliability issues and the only real difference I’ve noticed is the email size limit is 20MB as opposed to Gmail’s 25MB. The primary benefit I’ve seen is that calendar invites end up on my iCloud calendar, which is where I prefer them.
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-02-28 00:00:00 +0000 UTC'>February 28, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;dschaaff</footer>
  <a class="entry-link" aria-label="post link to Update on iCloud&#43; Custom Email Domain" href="http://localhost:1313/posts/2024/update-on-icloud-custom-email-domain/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Migrating My Email From Google Workspace To iCloud&#43;
    </h2>
  </header>
  <div class="entry-content">
    <p>I’m in the process of migrating my email from Google Workspace to iCloud&#43;. I’ve been using Google Workspace (aka gsuite, aka whatever name Google switches to next week) for my email for a long time. For ages it was free and made perfect sense as a service. Those free accounts have gone away, and the service’s focus is clearly aimed at the enterprise and not individuals like me. The price per user is also about to increase on me, so this felt like a good time to try something else. I’m only really interested in hosting email for a few custom domains and have no needs for any features beyond that. Our family already uses iCloud for everything so I figured why not give it a try.
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-01-29 00:00:00 +0000 UTC'>January 29, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;dschaaff</footer>
  <a class="entry-link" aria-label="post link to Migrating My Email From Google Workspace To iCloud&#43;" href="http://localhost:1313/posts/2024/migrating-from-google-workspace-to-icloud-plus/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">How to Renew Consul Root CA Certificate
    </h2>
  </header>
  <div class="entry-content">
    <p>The Consul root CA is generated using the consul tls ca create command. If created with the original options the root CA is only valid for a few years. After running production for a while you inevitably need to extend this certificate. To do so we need to generate and sign a new certificate using the existing private key. Consul does not provide any commands for doing so but it can be done using OpenSSL.
...</p>
  </div>
  <footer class="entry-footer"><span title='2021-02-03 00:00:00 +0000 UTC'>February 3, 2021</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;dschaaff</footer>
  <a class="entry-link" aria-label="post link to How to Renew Consul Root CA Certificate" href="http://localhost:1313/posts/2021/renew-consul-root-ca-certificate/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Lets Encrypt Bug Requires Reissue of Certificates by Cert-Manager in Kubernetes
    </h2>
  </header>
  <div class="entry-content">
    <p>I received a fun email from Lets Encrypt today letting me know that they were revoking all of my certificates on March 4. The bug is described here.
All of my certificates are managed by cert-manager inside Kubernetes. This led to the fun challenge of figuring out how to force a reissue of every certificate. There were 2 approaches that came up in the Kubernetes community slack.
Delete all secrets containing cert-manager issued certificates.
...</p>
  </div>
  <footer class="entry-footer"><span title='2020-03-03 00:00:00 +0000 UTC'>March 3, 2020</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;dschaaff</footer>
  <a class="entry-link" aria-label="post link to Lets Encrypt Bug Requires Reissue of Certificates by Cert-Manager in Kubernetes" href="http://localhost:1313/posts/2020/cert-manager-bug-lets-encrypt-k8s-renewal/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">In Praise of the Bat Commandline Tool
    </h2>
  </header>
  <div class="entry-content">
    <p>I’ve been working on helm charts a lot lately. For better or worse that has involved running helm install —debug —dry-run… a lot to ensure things render correctly. It is much easier to parse that output when there is syntax highlighting. Enter [bat](GitHub - sharkdp/bat: A cat(1) clone with wings.). I can helm install —debug —dry-run… | bat -l yaml to get full syntax highlighting. It’s a small thing but it makes a big difference.
...</p>
  </div>
  <footer class="entry-footer"><span title='2019-07-01 00:00:00 +0000 UTC'>July 1, 2019</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;dschaaff</footer>
  <a class="entry-link" aria-label="post link to In Praise of the Bat Commandline Tool" href="http://localhost:1313/posts/2019/in-praise-of-the-bat-command-line-tool/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Easy Integrations Tests for Java with the Maven Docker Plugin
    </h2>
  </header>
  <div class="entry-content">
    <p>Traditionally it has been a pain to manage the infrastructure necessary for running integration tests within a CI/CD pipeline. Several years ago I accomplished this with an RDS instance for the database in AWS dedicated solely to the test environment. The problem is that multiple tests running at the same time would cause conflicts as they inserted and removed data in the database. At the time I set a lock in Jenkins to only allow one service to utilize the test database at a time, but this was far from ideal. Thankfully there are a lot of good options for solving this problem. I’m particularly fond of using the Docker plugin for Maven to handle this when dealing with Java-based applications.
...</p>
  </div>
  <footer class="entry-footer"><span title='2019-01-19 00:00:00 +0000 UTC'>January 19, 2019</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;dschaaff</footer>
  <a class="entry-link" aria-label="post link to Easy Integrations Tests for Java with the Maven Docker Plugin" href="http://localhost:1313/posts/2019/easy-integrations-tests-for-java-with-the-maven-docker-plugin/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Monitoring Creation of Log Files in s3
    </h2>
  </header>
  <div class="entry-content">
    <p>I manage several apps that write various pieces of data to the local file system and rely on Fluentd to ship them to s3. There is solid monitoring around the fluentd aggregator process, but I wanted better visibility and alerting when things aren’t written to s3 as expected.
The solution I came up with was a custom Datadog check. The files I am monitoring are written into a bucket named something like example-logs/data/event-files/year/month/day. A new path is set up in the s3 bucket for the current day’s date, e.g. logs/data/example-log/2018/08/15 each day. The Datadog check sends the count of objects in the current date’s directory as a gauge. You can then monitor that objects are created each day as expected and at a normal rate.
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-08-29 03:45:14 +0000 UTC'>August 29, 2018</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;dschaaff</footer>
  <a class="entry-link" aria-label="post link to Monitoring Creation of Log Files in s3" href="http://localhost:1313/posts/2018/monitoring-creation-of-log-files-in-s3/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Quick Tip: Using [skip-ci] in Jenkins’ Declarative Pipelines
    </h2>
  </header>
  <div class="entry-content">
    <p>You’ve spent the past hour meticulously crafting a Readme update and its time to commit. Great, but what if you don’t want that commit to trigger automated testing, deploys, and other actions? If you’re using Jenkins declarative pipelines there’s a pretty simple solution.
Add the below when block to each stage you wish to skip in your Jenkinsfile.
when { not { changelog &#39;\\[skip-ci\\]&#39; } } We can also expand upon this for other actions if desired. For example, use the following around a deploy stage to avoid deploying pull requests, anything not on the master branch, and to respect the [skip-ci] param in a commit message.
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-08-27 22:57:53 +0000 UTC'>August 27, 2018</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;dschaaff</footer>
  <a class="entry-link" aria-label="post link to Quick Tip: Using [skip-ci] in Jenkins’ Declarative Pipelines" href="http://localhost:1313/posts/2018/quick-tip-using-skip-ci-in-jenkins-declarative-pipelines/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Better Jenkins Notifications in Declarative Pipelines
    </h2>
  </header>
  <div class="entry-content">
    <p>I’ve been using declarative pipelines in Jenkins for a while with the Slack plugin to send build notifications to Slack. The plugin does what it says on the tin but gives you a pretty boring message by default.
![E8F315D1-04A6-4DC4-B0D8-1E1E7ED42D08.png]({{ site.url }}/assets/img/e8f315d1-04a6-4dc4-b0d8-1e1e7ed42d08.png)
I used the environment variables available in the pipeline to make things a little bit better and link back to the job.
![08A97422-A7E2-4AB5-A65B-68EF7B5AE196.png]({{ site.url }}/assets/img/08a97422-a7e2-4ab5-a65b-68ef7b5ae196.png)
But I was still always disappointed the notifications didn’t contain more information. Thankfully version 2.3 of the plugin added support for the attachments portion of the Slack message API. I was able to leverage the attachments feature to get better message formatting. Meanwhile, I took some inspiration from this thread to incorporate test result summaries.
...</p>
  </div>
  <footer class="entry-footer"><span title='2018-02-09 18:42:27 +0000 UTC'>February 9, 2018</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;dschaaff</footer>
  <a class="entry-link" aria-label="post link to Better Jenkins Notifications in Declarative Pipelines" href="http://localhost:1313/posts/2018/better-jenkins-notifications-in-declarative-pipelines/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="http://localhost:1313/posts/page/2/">Next&nbsp;2/22&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Daniel Schaaff</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
